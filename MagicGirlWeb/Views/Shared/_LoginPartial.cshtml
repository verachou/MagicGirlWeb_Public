@using Microsoft.AspNetCore.Identity
@inject SignInManager<IdentityUser> SignInManager
@inject UserManager<IdentityUser> UserManager

<div class="dropdown dib">
  @if (SignInManager.IsSignedIn(User))
  {
    @* <span class="user-avatar">@User.Identity.Name
      <i class="ti-angle-down f-s-10"></i>
      </span>
      <form class="form-inline" asp-area="Identity" asp-page="/Account/Logout"
      asp-route-returnUrl="@Url.Page("/", new { area = "" })" method="post">
      <div class="input-group-btn">
      <button class="btn btn-light" type="submit">
      <i class="ti-power-off"></i>
      <span>Logout</span>
      </button>
      </div>
      </form> *@


    <div class="dropdown dib">
      <div class="header-icon">
        <span class="user-avatar" data-toggle="dropdown">@User.Identity.Name
          <i class="ti-angle-down f-s-10"></i>
        </span>
        <div class="drop-down dropdown-profile dropdown-menu dropdown-menu-right">
          <div class="dropdown-content-body">
            <ul>
              <li>
                <form id="formLogout" class="form-inline" asp-area="Identity" asp-page="/Account/Logout"
                asp-route-returnUrl="@Url.Page("/", new { area="" })" method="post">
                  <a href="javascript:;" id="anchorLogout">
                    <i class="ti-power-off"></i>
                    <span>登出</span>
                  </a>
                </form>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  }
  else
  {
    @* <span class="user-avatar">
      <form asp-controller="Account" asp-action="ExternalLogin" asp-route-returnurl="@ViewData["ReturnUrl"]"
      method="post">
      <button type="submit" class="btn btn-default" name="provider" value="Google" title="Login">Google Login</button>
      </form>
      </span> *@

    <div class="dropdown dib">
      <div class="header-icon">
        <form id="formLogin" asp-controller="Account" asp-action="ExternalLogin"
        asp-route-returnurl="@ViewData["ReturnUrl"]" method="post">
          <a href="javascript:;" id="anchorLogin" class="user-avatar google-login" title="使用Google登入">
            <img src="~/theme_focus/images/google-24.svg" class="m-r-12">使用 Google 登入
          </a>
          <button id="btnLogin" type="submit" name="provider" value="Google" title="Login" hidden></button>
        </form>
      </div>
    </div>
  }
</div>
